import{a as I}from"./chunk-RPUOQGBU.js";import{a as F,b as w,c as N,d as j,e as T,f as k,g as D,h as V,i as q,j as G,k as P}from"./chunk-SMWCMINB.js";import{J as m,K as p,N as h,P as f,R as s,S as n,T as l,V as L,W as x,Y as a,_ as b,da as C,ea as S,ia as M,ja as E,ma as v,u as d,y as u,z as c}from"./chunk-62R4RV7J.js";import"./chunk-7FQVP44B.js";function U(t,e){if(t&1&&(s(0,"span",12),a(1),n()),t&2){let g=x();m(),b(" ",g.getFieldError("username")," ")}}function _(t,e){if(t&1&&(s(0,"span",12),a(1),n()),t&2){let g=x();m(),b(" ",g.getFieldError("password")," ")}}var B=(()=>{let e=class e{constructor(i,o,r){this.formBuilder=i,this.router=o,this.authService=r,this.errorMessage="",this.formLogin=this.formBuilder.group({username:["",w.required],password:["",w.required]})}login(){if(this.formLogin.invalid){this.formLogin.markAllAsTouched();return}if(this.formLogin.valid){let i=this.formLogin.value.username,o=this.formLogin.value.password;this.authService.signIn(i,o).subscribe({next:r=>{r?(console.log("Login successful"),this.router.navigate(["/mantainer"])):(console.log("Login failed"),this.errorMessage="Usuario o contrase\xF1a incorrectos")},error:r=>{this.authService.handleLoginError(r),this.errorMessage="Ocurri\xF3 un error durante el inicio de sesi\xF3n. Por favor, int\xE9ntalo de nuevo m\xE1s tarde."}})}}isValidfield(i){return this.formLogin.controls[i].errors&&this.formLogin.controls[i].touched}getFieldError(i){if(!this.formLogin.controls[i])return null;let o=this.formLogin.controls[i].errors||{};for(let r of Object.keys(o))switch(r){case"required":return"This field is required.";case"minlength":return`Minimo ${o.minlength.requiredLength} characters.`;case"min":return"the minimum value is 0.";case"email":return"this field must be an email."}return null}};e.\u0275fac=function(o){return new(o||e)(p(V),p(E),p(I))},e.\u0275cmp=u({type:e,selectors:[["auth-login"]],decls:17,vars:3,consts:[[1,"flex","flex-col","items-center","justify-center","h-screen","bg-black"],[1,"text-white","text-2xl","mb-6"],[1,"bg-blue-400","shadow-md","rounded","px-8","pt-6","pb-8","mb-4",3,"ngSubmit","formGroup"],[1,"mb-4"],["for","username",1,"block","text-white","text-sm","font-bold","mb-2"],["formControlName","username","id","user","type","text",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["class","form-text text-danger",4,"ngIf"],[1,"mb-6"],["for","password",1,"block","text-white","text-sm","font-bold","mb-2"],["formControlName","password","id","password","type","password",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","mb-3","leading-tight","focus:outline-none","focus:shadow-outline"],[1,"flex","items-center","justify-between"],["type","submit",1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline"],[1,"form-text","text-danger"]],template:function(o,r){o&1&&(s(0,"div",0)(1,"header",1),a(2,"login back office portfolio max poblete"),n(),s(3,"form",2),L("ngSubmit",function(){return r.login()}),s(4,"div",3)(5,"label",4),a(6," Email. "),n(),l(7,"input",5),h(8,U,2,1,"span",6),n(),s(9,"div",7)(10,"label",8),a(11," Password. "),n(),l(12,"input",9),h(13,_,2,1,"span",6),n(),s(14,"div",10)(15,"button",11),a(16," Log In "),n()()()()),o&2&&(m(3),f("formGroup",r.formLogin),m(5),f("ngIf",r.isValidfield("username")),m(5),f("ngIf",r.isValidfield("password")))},dependencies:[C,T,F,N,j,k,D]});let t=e;return t})();var O=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=u({type:e,selectors:[["app-layout-page"]],decls:1,vars:0,template:function(o,r){o&1&&l(0,"router-outlet")},dependencies:[M]});let t=e;return t})();var $=[{path:"",component:O,children:[{path:"login",component:B},{path:"**",redirectTo:"login"}]}],R=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=c({type:e}),e.\u0275inj=d({imports:[v.forChild($),v]});let t=e;return t})();var de=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=c({type:e}),e.\u0275inj=d({imports:[S,R,q,G,P]});let t=e;return t})();export{de as AuthModule};
